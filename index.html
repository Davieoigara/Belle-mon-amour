<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Belle ❤️</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Inter:wght@300&display=swap" rel="stylesheet">
    <style>
        body { background-color: #1a0505; color: white; font-family: 'Inter', sans-serif; overflow: hidden; margin: 0; }
        .handwritten { font-family: 'Dancing Script', cursive; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef } = React;
        const { motion, AnimatePresence } = window.Motion;

        function App() {
            const [view, setView] = useState('landing'); // landing, journey, ask, finale
            const [activePhoto, setActivePhoto] = useState(null);
            const [clickedCount, setClickedCount] = useState(0);
            const audioRef = useRef(null);

            // Using your repository filenames
            const photos = [
                '1.jpeg','2.jpeg','3.jpeg','4.jpeg','5.jpeg',
                '6.jpeg','7.jpeg','8.jpeg','9.jpeg','10.jpeg',
                '11.jpeg','12.jpeg','13.jpeg','14.jpeg','15.jpeg',
                '16.jpeg','belle.jpg.jpeg'
            ];

            const startExperience = () => {
                audioRef.current.play().catch(() => {});
                setView('journey');
            };

            const handlePetalClick = (index) => {
                setActivePhoto(photos[index]);
                const nextCount = clickedCount + 1;
                setClickedCount(nextCount);
                // After 10 petals, move to the question
                if (nextCount >= 10) {
                    setTimeout(() => setView('ask'), 1500);
                }
            };

            return (
                <div className="h-screen w-screen relative overflow-hidden flex items-center justify-center">
                    <audio ref={audioRef} loop src="Alwaysbemybaby.mp3" />

                    <AnimatePresence mode="wait">
                        {/* ACT 1: THE LANDING */}
                        {view === 'landing' && (
                            <motion.div 
                                key="landing" 
                                exit={{ opacity: 0 }} 
                                onClick={startExperience} 
                                className="text-center cursor-pointer p-10 z-50"
                            >
                                <motion.h1 
                                    animate={{ opacity: [0.4, 1, 0.4] }} 
                                    transition={{ duration: 3, repeat: Infinity }} 
                                    className="text-xl tracking-[0.3em] uppercase font-light"
                                >
                                    For Belle
                                </motion.h1>
                                <p className="mt-4 text-[10px] opacity-40 uppercase tracking-widest italic">Touch to enter</p>
                            </motion.div>
                        )}

                        {/* ACT 2: THE JOURNEY */}
                        {view === 'journey' && (
                            <motion.div key="journey" initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="absolute inset-0">
                                <AnimatePresence>
                                    {activePhoto && (
                                        <motion.div 
                                            key={activePhoto} 
                                            initial={{ opacity: 0, scale: 0.9, rotate: -2 }} 
                                            animate={{ opacity: 1, scale: 1, rotate: 0 }} 
                                            exit={{ opacity: 0, scale: 1.1 }} 
                                            className="absolute inset-0 flex items-center justify-center z-10"
                                        >
                                            <div className="w-[75%] max-w-[350px] aspect-[4/5] bg-cover bg-center rounded-sm border-[10px] border-white shadow-2xl"
                                                 style={{ backgroundImage: `url(${activePhoto})` }} />
                                        </motion.div>
                                    )}
                                </AnimatePresence>
                                {[...Array(15)].map((_, i) => (
                                    <motion.button 
                                        key={i}
                                        initial={{ x: Math.random()*100+'vw', y: Math.random()*100+'vh' }}
                                        animate={{ y: [null, Math.random()*100+'vh'], x: [null, Math.random()*100+'vw'] }}
                                        transition={{ duration: 25, repeat: Infinity, ease: "linear" }}
                                        onClick={() => handlePetalClick(i % photos.length)}
                                        className="absolute text-red-500/40 text-2xl z-20"
                                    >
                                        ❤
                                    </motion.button>
                                ))}
                            </motion.div>
                        )}

                        {/* ACT 3: THE PROPOSAL */}
                        {view === 'ask' && (
                            <motion.div key="ask" initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="text-center p-10 z-30">
                                <h2 className="handwritten text-5xl md:text-6xl mb-6 text-pink-200">Belle,</h2>
                                <p className="text-lg italic opacity-80 mb-10 tracking-wide">Will you be my Valentine?</p>
                                <button 
                                    onClick={() => setView('finale')} 
                                    className="px-12 py-3 border border-pink-200 text-pink-200 rounded-full hover:bg-pink-200 hover:text-red-950 transition-all font-bold uppercase tracking-widest text-sm"
                                >
                                    Yes
                                </button>
                            </motion.div>
                        )}

                        {/* ACT 4: THE FINALE */}
                        {view === 'finale' && (
                            <motion.div 
                                key="finale" 
                                initial={{ opacity: 0 }} 
                                animate={{ opacity: 1 }} 
                                className="absolute inset-0 flex flex-col items-center justify-center text-center p-10 overflow-hidden"
                            >
                                {/* Background Image: 11.jpeg */}
                                <div 
                                    className="absolute inset-0 bg-cover bg-center z-0 scale-105" 
                                    style={{ backgroundImage: `url('11.jpeg')` }} 
                                />
                                
                                <div className="absolute inset-0 bg-black/50 z-10" />

                                <div className="relative z-20">
                                    <motion.h1 
                                        initial={{ scale: 0.5, y: 20 }} 
                                        animate={{ scale: 1, y: 0 }} 
                                        className="text-7xl md:text-9xl font-black italic text-white drop-shadow-[0_0_20px_rgba(255,255,255,0.4)]"
                                    >
                                        YES! ❤️
                                    </motion.h1>
                                    <motion.p 
                                        initial={{ opacity: 0 }} 
                                        animate={{ opacity: 1 }} 
                                        transition={{ delay: 0.5 }} 
                                        className="text-xl md:text-2xl mt-8 font-light tracking-[0.4em] uppercase text-white drop-shadow-md"
                                    >
                                        Always Be My Baby... Indefinitely.
                                    </motion.p>
                                </div>

                                {/* Infinite Rain of Hearts */}
                                <div className="absolute inset-0 pointer-events-none z-30">
                                    {[...Array(30)].map((_, i) => (
                                        <motion.div 
                                            key={i} 
                                            animate={{ y: ['-10vh', '110vh'] }} 
                                            transition={{ repeat: Infinity, duration: 2 + Math.random()*2, delay: i*0.1 }}
                                            className="absolute text-3xl" 
                                            style={{ left: Math.random()*100+'vw' }}
                                        >
                                            ❤️
                                        </motion.div>
                                    ))}
                                </div>
                            </motion.div>
                        )}
                    </AnimatePresence>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
